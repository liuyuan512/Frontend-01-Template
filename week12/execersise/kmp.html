<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>kmp算法</title>
    </head>
    <body>
        <script>
            // 按位找,算法复杂度 m*n
            function find1(source, pattern) {
                for (let i = 0; i < source.length; i++) {
                    let matched = true;
                    for (let j = 0; j < pattern.length; j++) {
                        if (source[i + j] !== pattern[j]) {
                            matched = false;
                            break;
                        }
                    }
                    if (matched) return true;
                }
                return false;
            }

            // 高效但是错误， "abcxxy","xy" 会匹配失败
            function find2(source, pattern) {
                let j = 0;
                for (let i = 0; i < source.length; i++) {
                    console.log(source[i], " ", pattern[j]);
                    if (source[i] === pattern[j]) {
                        j++;
                    } else {
                        j = 0;
                    }
                    if (j === pattern.length) {
                        return true;
                    }
                }
                return false;
            }

            // 改进
            function find2_1(source, pattern) {
                let j = 0;
                for (let i = 0; i < source.length; i++) {
                    console.log(source[i], " ", pattern[j]);
                    if (source[i] === pattern[j]) {
                        j++;
                    } else {
                        j = 0;
                        if (source[i] === pattern[j]) {
                            j++;
                        }
                    }
                    if (j === pattern.length) {
                        return true;
                    }
                }
                return false;
            }

            // 改进2
            function find2_2(source, pattern) {
                let j = 0;
                for (let i = 0; i < source.length; i++) {
                    console.log(source[i], " ", pattern[j]);
                    if (source[i] === pattern[j]) {
                        j++;
                    } else {
                        j = 0;
                        if (source[i] === pattern[j]) {
                            j++;
                        }
                    }
                    if (j === pattern.length) {
                        return true;
                    }
                }
                return false;
            }
        </script>
    </body>
</html>
